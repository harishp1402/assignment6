created a common method to handle different types of file